---
apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: gitea
  namespace: flux-system
spec:
  chart:
    spec:
      chart: gitea
      sourceRef:
        kind: HelmRepository
        name: gitea
      version: 4.0.3
  install: {}
  interval: 1m0s
  targetNamespace: dev-gitea
  values:
    affinity: {}
    clusterDomain: cluster.local
    extraVolumeMounts: null
    extraVolumes: null
    gitea:
      admin:
        email: ${SECRET_EMAIL}
        password: ${SECRET_GITEA_ADMIN_PASSWORD}
        username: ${SECRET_GITEA_ADMIN_USER}
      cache:
        builtIn:
          enabled: false
      config:
        APP_NAME: 'Gitea: Git with a cup of tea'
        RUN_MODE: prod
        cache:
          ADAPTER: redis
          ENABLED: "true"
          HOST: redis://:${SECRET_GLOBAL_REDIS_PASSWORD}@dev-gitea-gitea-redis.dev-gitea.svc.cluster.local:6379/0?pool_size=100&idle_timeout=180s
          INTERVAL: "60"
        database:
          DB_TYPE: postgres
          HOST: dev-gitea-gitea-postgres.dev-gitea.svc.cluster.local
          NAME: ${SECRET_GITEA_DB_NAME}
          PASSWD: ${SECRET_GITEA_DB_PASSWORD}
          PATH: /data/gitea/gitea.db
          USER: ${SECRET_GITEA_DB_USER}
      database:
        builtIn:
          mariadb:
            enabled: false
          mysql:
            enabled: false
          postgresql:
            enabled: false
      ldap:
        enabled: false
      livenessProbe:
        enabled: true
        failureThreshold: 10
        initialDelaySeconds: 200
        periodSeconds: 10
        successThreshold: 1
        timeoutSeconds: 1
      metrics:
        enabled: false
        serviceMonitor:
          enabled: false
      oauth:
        enabled: false
      podAnnotations: {}
      readinessProbe:
        enabled: true
        failureThreshold: 3
        initialDelaySeconds: 5
        periodSeconds: 10
        successThreshold: 1
        timeoutSeconds: 1
      startupProbe:
        enabled: false
        failureThreshold: 10
        initialDelaySeconds: 60
        periodSeconds: 10
        successThreshold: 1
        timeoutSeconds: 1
    image:
      pullPolicy: Always
      repository: gitea/gitea
      rootless: false
      tag: 1.14.6
    imagePullSecrets: []
    ingress:
      annotations: {}
      enabled: false
      hosts:
      - host: git.example.com
        paths:
        - path: /
          pathType: Prefix
      tls: []
    initPreScript: ""
    mariadb:
      auth:
        database: gitea
        password: gitea
        rootPassword: gitea
        username: gitea
      primary:
        persistence:
          size: 10Gi
        service:
          port: 3306
    memcached:
      service:
        port: 11211
    mysql:
      db:
        name: gitea
        password: gitea
        user: gitea
      persistence:
        size: 10Gi
      root:
        password: gitea
      service:
        port: 3306
    nodeSelector: {}
    persistence:
      accessModes:
      - ReadWriteOnce
      annotations: {}
      enabled: true
      existingClaim: gitea-pvc
      labels: {}
      size: 10Gi
    postgresql:
      global:
        postgresql:
          postgresqlDatabase: gitea
          postgresqlPassword: gitea
          postgresqlUsername: gitea
          servicePort: 5432
      persistence:
        size: 10Gi
    replicaCount: 1
    resources: {}
    securityContext: {}
    service:
      http:
        annotations: null
        clusterIP: None
        loadBalancerSourceRanges: []
        port: 3000
        type: ClusterIP
      ssh:
        annotations: null
        clusterIP: None
        loadBalancerSourceRanges: []
        port: 22
        type: ClusterIP
    signing:
      enabled: false
      gpgHome: /data/git/.gnupg
    statefulset:
      env: []
      labels: {}
      terminationGracePeriodSeconds: 60
    tolerations: []

